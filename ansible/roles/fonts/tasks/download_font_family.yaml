---

- name: Font Info
  set_fact:
    family: "{{item|split(':')|first}}"
    source: "{{item|split(':')|last}}"

- name: Check font
  ansible.builtin.stat:
    path: "{{font_base_directory}}/{{source}}/{{family}}"
  register: font_dir

- name: Print font paths for debugging
  debug:
    msg:
      - "font_base_directory: {{ font_base_directory }}"
      - "source: {{ source }}"
      - "family: {{ family }}"
      - "font_dir.stat.exists: {{ font_dir.stat.exists }}"
      - "full path: {{ font_base_directory }}/{{ source }}/{{ family }}"

- name: "Download {{family}} [from {{source}} fonts]"
  ansible.builtin.command:
    cmd: "{{ role_path }}/scripts/download '{{ item }}' '{{ font_base_directory }}/{{ source }}/{{ family }}'"
  when: not font_dir.stat.exists
